<!DOCTYPE html>
<html class="light" lang="pt-br">
<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Painel de Vendas</title>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script src="/js/auth.js"></script>
    <script>
        protectPage();
        tailwind.config = { darkMode: "class", theme: { extend: { colors: { primary: "#005A9C", "background-light": "#F5F5F5", "background-dark": "#101922", "text-light": "#333333", "text-dark": "#F5F5F5", success: "#28A745", warning: "#FFC107", }, fontFamily: { display: ["Inter", "sans-serif"] }, borderRadius: { DEFAULT: "0.25rem", lg: "0.5rem", xl: "0.75rem", full: "9999px" }, }, }, };
    </script>
    <style> body { min-height: max(884px, 100dvh); } </style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-text-light dark:text-text-dark">
    <div class="relative flex h-auto min-h-screen w-full flex-col group/design-root overflow-x-hidden">
        <div class="flex items-center bg-background-light dark:bg-background-dark p-4 pb-2 justify-between sticky top-0 z-10">
            <div class="flex size-12 shrink-0 items-center">
                <button onclick="logout()" class="text-red-500" title="Sair">
                    <span class="material-symbols-outlined">logout</span>
                </button>
            </div>
            <h1 class="text-lg font-bold leading-tight tracking-[-0.015em] flex-1 text-center text-text-light dark:text-text-dark">Painel de Vendas</h1>
            <div class="flex w-12 items-center justify-end">
                <button id="shareCatalogButton" class="text-primary" title="Compartilhar Catálogo">
                    <span class="material-symbols-outlined">share</span>
                </button>
            </div>
        </div>
        
        <div class="px-4 py-6 pb-24">
            <div class="grid grid-cols-3 gap-4">
                <a href="/catalogo_de_produtos.html" class="flex flex-col items-center justify-center p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-background-dark shadow-sm aspect-square">
                    <span class="material-symbols-outlined text-4xl text-primary">inventory_2</span>
                    <span class="mt-2 text-sm font-medium text-center">Gerenciar Produtos</span>
                </a>
                <a href="/gerenciar_clientes.html" class="flex flex-col items-center justify-center p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-background-dark shadow-sm aspect-square">
                    <span class="material-symbols-outlined text-4xl text-primary">groups</span>
                    <span class="mt-2 text-sm font-medium text-center">Gerenciar Clientes</span>
                </a>
                <a href="/historico_vendas.html" class="flex flex-col items-center justify-center p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-background-dark shadow-sm aspect-square">
                    <span class="material-symbols-outlined text-4xl text-primary">history</span>
                    <span class="mt-2 text-sm font-medium text-center">Histórico de Vendas</span>
                </a>
                <a href="/gerenciamento_de_periodos.html" class="flex flex-col items-center justify-center p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-background-dark shadow-sm aspect-square">
                    <span class="material-symbols-outlined text-4xl text-primary">date_range</span>
                    <span class="mt-2 text-sm font-medium text-center">Períodos</span>
                </a>
            </div>
        </div>
        
        <div class="fixed bottom-0 left-0 z-50 w-full h-16 bg-white border-t border-gray-200 dark:bg-background-dark dark:border-gray-600">
            <div class="grid h-full max-w-lg grid-cols-1 mx-auto font-medium">
                <div class="flex items-center justify-center">
                    <a href="/cadastro_de_venda.html" class="relative -top-6 flex items-center justify-center w-16 h-16 bg-primary rounded-full text-white shadow-lg hover:bg-blue-800" type="button">
                        <span class="material-symbols-outlined text-4xl">add</span>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const shareButton = document.getElementById('shareCatalogButton');

            shareButton.addEventListener('click', () => {
                const token = getToken();
                if (!token) return;

                const payload = JSON.parse(atob(token.split('.')[1]));
                const userId = payload.id;

                const catalogUrl = `${window.location.origin}/catalogo_de_produtos.html?user=${userId}`;
                
                if (navigator.share) {
                    navigator.share({
                        title: 'Nosso Catálogo de Produtos',
                        text: 'Confira nossos produtos!',
                        url: catalogUrl,
                    }).catch(console.error);
                } else {
                    navigator.clipboard.writeText(catalogUrl).then(() => {
                        alert('Link do catálogo copiado para a área de transferência!');
                    }).catch(err => {
                        alert('Não foi possível copiar o link.');
                    });
                }
            });
        });
    </script>
</body>
</html>